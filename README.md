# Android-Anki-Blank 프로젝트 과정
###### 코딩에 입문하계된 계기이자 처음으로 완성한 프로젝트이다.
###### 이 프로젝트중에는 깃허브 같은 것은 모르는 상태였기에, 그저 배우고 코드를 짜는데만 몰두했었다.
###### 그러나 기록의 중요성에 대해 느낀 점이 있어 프로젝트 과정을 되돌아 보면서 뒤늦게나마 나름의 깨달은 점을 써두고자 한다.

## 1. 계기
대학 재학 중, 산림산업기사 시험을 공부하던 중, 암기를 좀 더 편하게 했으면 했다. 그 전부터 Anki라는 카드형 암기 보조 프로그램을 알고는 있었다.  
  
Anki는 앞면에 문제, 뒷면에 정답이 있는 카드를 추가하여 많이 틀릴 수록 더 자주 보여준다. 인간의 암기 특성을 연구한 내용을 참고하여 만들어 졌다 한다.  
  
그러나 나에게는 수동으로 카드를 추가하는 과정이 배보다 배꼽이 크다 느꼈다. 더군다나 카드는 시험 준비서와는 달리, 주위내용과 분리되어 있어 맥락을 통한 공부는 불가능에 가깝다. 
  
결국 '직접 만들어 볼수 없을까?' 라는 생각이 들었고 Anki와 비슷하지만, 카드대신, 학습서 파일의 어느 페이지의 특정 부분을 가리는 빈칸의 형태로 만들어 보기로 마음먹었다. 그렇게 산업기사 시험을 마친 직후 독학으로 프로그래밍 입문공부 및 앱 제작 과정에 착수하였다.
  
나는 내 아이디어가 꽤 괜찮아 보였고, 나중의 일이지만, 참고하기 위해 알아보다가 다른 비슷한 앱들이 있다는 것을 알았을 때도 내가 계획한 것이 더 뛰어나다고 느꼈다. 내가 원하는 결과물에 대한 자신이 있었기에 목표치가 더 높아졌음에도 중간에 동력을 잃지 않고 작업을 진행할 수 있었다.
## 2. 안드로이드를 선택한 이유
1에서의 계기 이후, 나 혼자 잘 사용하는 것을 넘어 용돈이라도 벌어 볼수는 없을까 생각하였다. 그렇게 마음을 먹자 고민해야 할 것이 많아졌다.  
  
우선 형태를 정해야 했다. 당장 처음 떠오르는 생각은 Anki 처럼 윈도우에서 쓸 수 있는 프로그램을 다운받을 수 있도록 하는 것이었다. 그러나 당시 소프트웨어 분야에 대해 아무것도 모르는 나라도 그러려면 서버가 필요하고, 서버를 운영하려면 서버비가 들어간다는 사실 정도는 알고 있었다. 무일푼인 내가 그만한 위험을 감수할 수는 없었기에 포기했다. 더 큰 문제는 결제였다. 코딩 경험과 사업 경험 둘다 없는 나에게 결제 기능을 만드는 것은 기술적인 부분을 넘어서 높은 벽으로 느껴졌다.
  
  두번째로 떠올린 방식은 웹 브라우저 상에서 기능을 구현하는 것이다. 결과를 먼저 말하자면 이것도 기각했다. 우선 이것 또한 서버와 결제의 문제에서 자유로울 수는 없다. 첫번째보다 더 심각한데, 알아본 결과 웹에는 프론트엔드와 백엔드가 있는데 뭔가 빨리 결과를 내고 싶은 입장에서 2배의 지식을 습득해야 하는 필요성에 의문이 있었다. 그리고 오리지날 Anki에 생각이 묶여서 그런지는 몰라도 굳이 웹 브라우저를 통해 암기 공부를 하는 것이 조잡하다고 느껴졌다.
  
  또다른 선택지는 모바일이었다. 우선 모바일은 서버가 필요없었다. 또한 결제, 배포및 홍보의 어려움이 앞의 두 가지 것들에 비해 매우 낮다고 느꼈다. 구글과 애플의 앱스토어가 서버와 배포, 결제를 맡아서 해주고 있는 형태이기 때문이다. 모바일은 이동성도 있어 어디서나 외울 수 있다. 이때는 고려하지 못했지만, 유저의 암기 데이터도 기기 내에 저장 할 수 있다는 이득도 누릴 수 있었다. 거기에 막연히 모바일 앱은 세련된 것이라는 생각도 동기가 되었다. IOS 대신 안드로이드를 선택한 이유는 안드로이드의 접근성과 개방성 때문이다. 앱스토어 계정등록비 10만원이 부담되기도 했고 나 스스로가 갤럭시를 쓰고 있기 때문에 마음이 기울 수 밖에 없었다. 당시 아무것도 모르는 상태였기 때문에 한가지에 집중해서 결과를 내는것이 목표였다.

## 3. 자바 및 안드로이드 학습
  안드로이드 앱 제작에 대해 알아보면서 자바 혹은 코틀린 언어를 배워야 한다는 것을 알았다. 내가 안 것은 자바가 나온지 오래 됐기 때문에 모를 때 참고 할 것이 많다는 정도였다. 독학으로, 혼자 만드는 것이기 때문에 자바를 배우는 것이 합리적이라 생각했다. 더군다나 자바는 옛날에 소프트웨어와 관련 없을 때도 몇번쯤 들어본 단어였다. 그렇게 언어를 결정하고 일단 자바 강의를 찾았다. 다행히도 유투브에 남궁성 강사님의 자바의 정석 강의가 공개되어 있는것을 발견했고 그것으로 학습했다. 다음으로 마찬가지, 유투브에서 Do it 안드로이드 강의를 보고 학습했다.

## 4. 기획, 설계, 디자인
학습중 관심있게 본 것은 화면 화면좌표구하기, 도형그리기 그리고 Sqlite이다. 이것을 보고 PDF파일을 연다음, 빈칸 사각형들의 꼭짓점의 좌표를 Sqlite에 저장한 후 그것을 바탕으로 화면에 사각형을 그리면 된다는 기본적인 아이디어를 구상하였다. 또한 구글플레이를 통해 배포하여 수익을 얻고자 하기 때문에 두 루트 폴더를 나누어 기본폴더는 PDF페이지 제한을 두기로 했다.
  
그러나 코드 작성에 착수하자 막상 고민할 것이 많았다. 이런 문제가 생기면 그때그때 해결했다. 예를 들어 메인화면의 경우 Anki 뿐만 아니라 구글플레이의 다른 비슷한 앱들을 참고해서 나의 방식으로 만드는 것이다. 이런 방식은 제작이 거의 후반에 접어 들 때까지 유지되었는데 후회하는 부분이다. 허술한 설계는 제작 과정 내내 부메랑이 되어 돌아왔다. 만약 다시 만든다면 앱 내의 전체적인 기능과 액티비티 관계, 각 화면 내의 모든 기능과 아이콘 모양까지 디테일하게 정하고 갈 것이다. 
  
그래도 잘 한 부분이 있다면, 나 뿐만 아니라 다른 사람이 사용하고, 돈을 지불하는 것도 염두에 뒀기 때문에 사용자가 화면 요소를 봤을 때 가능한 아름다움과 간결함을 느끼며, 버튼의 기능과 내 의도를 어렵지 않게 이해할 수 있도록 고민하면서 했다는 것이다. 그렇다 해서 전문적인 디자이너 보다 잘 한 것은 아니겠지만, 화면 요소 하나에도 여러번의 기능 수정이 있어왔던 것을 생각할때 별 생각없이 만들었다면 상당히 조악한 결과물이 나왔을게 틀림없다 생각한다.

## 5. 메인 화면1
다른 사례들을 참고한 결과 메인화면은 폴더 디렉토리와 PDF파일 목록을 보고 관리 할 수 있는 뷰가 중심이 되어야 한다. 우선, PDF 파일의 페이지 수 제한이 있는 체험판 폴더를 만들기로 했기 때문에 외부 파일을 앱 내 폴더에 복사해오기로 했다. 여기서 문제가 생긴다. 이때가 안드로이드 API 30이 막 나왔을 때이다. API 29부터 저장소 정책에 큰 변화가 있었다. 그렇기에 기존에 구글에서 찾을수 있는 저장소 접근 및 폴더,파일 관리 방법의 대부분의 Deprecated되었다. 결국 많은 시간을 소요해 안드로이드 ACTION_OPEN_DOCUMENT 인텐트를 이용해 파일 경로를 찾는 코드를 참고할 수 있었다. 그 후 추가적인 구글 검색을 통해 내가 원하는 파일 Input/Outputstream을 통해 루트 디렉토리 밑의 절대 경로로 파일을 복사해 올 수 있게 되었다. 추가적으로 일반적인 Outputstream이 아닌 FileOutputStream을 사용해야 위치를 내가 원하는 곳으로 지정할 수 있다는 것을 알았다.
  
## 6. PDF 뷰어와 드로잉
우선 PDF 파일을 외부에서 가져와 앱 내에서 존재하는 것을 확인하는 것 까진 성공했다. 학습을 하기 위해서는 우선 일반적인 PDF뷰어부터 구현해야 했다. 구글링으로 좋은 라이브러리가 깃허브에 올려져 있는 것을 보았다. 뷰어를 띄우는데 조금 애를 먹긴 했지만 다른 작업에 비해서는 비교적 쉽게 마무리 했다. 다음은 PDF를 가리는 사각형을 만드는 것이다. 라이브러리에 드로잉 기능이 내재되어 있었다. Readme로는 이해하는 데 부족해서 라이브러리 사용자들 질문을 뒤져가면서 사용법을 이해했다. 문제는 사용자가 원하는 대로 그리는 것이다. 라이브러리가 탭 같은 동작을 감지할 수는 있어서 그 위치에 도형을 그릴 수는 있었다. 하지만 자유자재로 사각형을 그리려면 드래그를 해야 했다. 그런데 그렇게 되면 PDF 페이지가 넘어가게 된다. 처음 만들때 페이지를 고정시킬 수는 있었지만 문서를 읽는 중에 다시 넘길 수 있도록 바꿀수는 없었다. 메인 화면을 구성하는 이후로 가장 어려운 상황이었다. 수많은 시행착오를 거쳐 해결책을 찾았다. 비어있는 투명한 뷰를 PDF뷰 위에다 겹치는 것이다. 입력을 투명한 뷰가 받을때는 문서 스크롤이 되지 않는다.


메인 뷰의 중심에서 다음으로 중요한 것은 폴더이다. 다른 앱들을 참고한 결과 루트 디렉토리부터 말단 파일까지 한눈에 들어오는 폴더 트리 구조가 있었다. 내눈에도 그것이 사용자가 쓰기에 좋아보여 따라하기로 했다. 그러나 그걸 구현하는것은 생각보다 어려웠다. 사용자의 폴더 밑 파일의 추가, 삭제에 반응해야 했으며 한 폴더 안의 표시를 어떻게 하는지, 언제 그것이 끝나는지 고민해야 했다. 사용자가 누를때 접었다 폈다도 할수 있어야 했다. 당시 나에게 너무 어려웠기 때문에 대신 한 화면에 한 폴더만 보여주는 식으로 이동해 가면 어떨까 생각했다. 기능성을 희생하더라도 쉬운 길을 가자는 유혹이 있었다. 그러나 아무리 봐도 원안과 두번째 안의 수준은 너무 차이가 느껴졌다. 결국 구글과 유투브에 많은 시간을 써서 비슷한 해결법을 찾았다. 핵심은 재귀였다. 폴더 뷰 안에 다른 폴더뷰와 PDF목록을 보여주는 리사이클러 뷰를 넣는 것이다. 지금 보면 별거 아니지만 나는 이때 처음으로 재귀함수라는 것을 알았다. 사실 이 문제를 해결하고 나서도 한동안 '재귀'라는 용어 자체는 몰랐을 정도다. 그렇게 폴더 트리 뷰 구성의 중요한 부분이 해결되었다. 이 방식을 쓰면 기본 폴더와 프리미엄 폴더를 구분하는 것도 쉬워지는 효과도 있었다. 그저 몇몇 매개변수만 바꿔서 각각의 +재귀함수를 두번 시행하면 되기 때문이다.

폴더를 추가, 삭제하는것, PDF목록 리사이클러 뷰를 다루는 동안 AlertDialog,애니메이션과도 많이 친숙해졌다.이것은 기타 디자인과도 연결되는데 4번의 내용처럼 사용자에게 어떤 화면을 보여주고 기능을 제시할지 고민을 많이 하고 시행착오를 겪었다. 폴더와 PDF 아이콘을 선정해야 했고 저작권 문제도 없어야 했다. 글자 크기와 폰트도 중요했다.결국
